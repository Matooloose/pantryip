"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/process-voice/route";
exports.ids = ["app/api/process-voice/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess-voice%2Froute&page=%2Fapi%2Fprocess-voice%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess-voice%2Froute.ts&appDir=%2Fhome%2Fchosen333%2FMusic%2Fpantryip%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fchosen333%2FMusic%2Fpantryip&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess-voice%2Froute&page=%2Fapi%2Fprocess-voice%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess-voice%2Froute.ts&appDir=%2Fhome%2Fchosen333%2FMusic%2Fpantryip%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fchosen333%2FMusic%2Fpantryip&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_chosen333_Music_pantryip_app_api_process_voice_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/process-voice/route.ts */ \"(rsc)/./app/api/process-voice/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/process-voice/route\",\n        pathname: \"/api/process-voice\",\n        filename: \"route\",\n        bundlePath: \"app/api/process-voice/route\"\n    },\n    resolvedPagePath: \"/home/chosen333/Music/pantryip/app/api/process-voice/route.ts\",\n    nextConfigOutput,\n    userland: _home_chosen333_Music_pantryip_app_api_process_voice_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/process-voice/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9jZXNzLXZvaWNlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwcm9jZXNzLXZvaWNlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcHJvY2Vzcy12b2ljZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGY2hvc2VuMzMzJTJGTXVzaWMlMkZwYW50cnlpcCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGaG9tZSUyRmNob3NlbjMzMyUyRk11c2ljJTJGcGFudHJ5aXAmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ2E7QUFDMUY7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYW50cnlpcS8/YTZlZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9jaG9zZW4zMzMvTXVzaWMvcGFudHJ5aXAvYXBwL2FwaS9wcm9jZXNzLXZvaWNlL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9jZXNzLXZvaWNlL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvY2Vzcy12b2ljZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcHJvY2Vzcy12b2ljZS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL2Nob3NlbjMzMy9NdXNpYy9wYW50cnlpcC9hcHAvYXBpL3Byb2Nlc3Mtdm9pY2Uvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3Byb2Nlc3Mtdm9pY2Uvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess-voice%2Froute&page=%2Fapi%2Fprocess-voice%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess-voice%2Froute.ts&appDir=%2Fhome%2Fchosen333%2FMusic%2Fpantryip%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fchosen333%2FMusic%2Fpantryip&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/process-voice/route.ts":
/*!****************************************!*\
  !*** ./app/api/process-voice/route.ts ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_huggingface__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/huggingface */ \"(rsc)/./lib/huggingface.ts\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n\n\n\nconst RequestSchema = zod__WEBPACK_IMPORTED_MODULE_2__.object({\n    transcript: zod__WEBPACK_IMPORTED_MODULE_2__.string().min(1, \"Transcript is required\"),\n    household_size: zod__WEBPACK_IMPORTED_MODULE_2__.number().min(1).max(20).default(1)\n});\nasync function POST(req) {\n    const startTime = Date.now();\n    try {\n        const body = await req.json();\n        const { transcript, household_size } = RequestSchema.parse(body);\n        console.log(\"\\n\\uD83C\\uDFA4 ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\");\n        console.log(\"   PROCESS VOICE ‚Äî Analyzing transcript\");\n        console.log(\"‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\");\n        console.log(`  üìù Transcript: \"${transcript.substring(0, 80)}${transcript.length > 80 ? \"...\" : \"\"}\"`);\n        console.log(`  üë§ Household size: ${household_size}`);\n        console.log(\"  \\uD83E\\uDD16 Sending to Hugging Face AI for analysis...\");\n        console.log(\"  ‚è≥ This may take 10-20 seconds...\\n\");\n        const profile = await (0,_lib_huggingface__WEBPACK_IMPORTED_MODULE_1__.extractProfileFromTranscript)(transcript, household_size);\n        const elapsed = ((Date.now() - startTime) / 1000).toFixed(1);\n        console.log(`\\n  ‚úÖ Profile extracted in ${elapsed}s`);\n        console.log(`  üçΩ  Meals found: ${profile.meals.length}`);\n        console.log(`  ü•ó Dietary preferences: ${profile.dietary_preferences?.join(\", \") || \"none\"}`);\n        console.log(`  ‚ö†Ô∏è  Allergies: ${profile.allergies?.join(\", \") || \"none\"}`);\n        console.log(\"‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\\n\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            transcript,\n            profile\n        });\n    } catch (error) {\n        const elapsed = ((Date.now() - startTime) / 1000).toFixed(1);\n        console.error(`\\n‚ùå PROCESS VOICE FAILED after ${elapsed}s`);\n        console.error(\"  Error:\", error instanceof Error ? error.message : error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: error instanceof Error ? error.message : \"Processing failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb2Nlc3Mtdm9pY2Uvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3RDtBQUNTO0FBQ3pDO0FBRXhCLE1BQU1HLGdCQUFnQkQsdUNBQVEsQ0FBQztJQUM3QkcsWUFBWUgsdUNBQVEsR0FBR0ssR0FBRyxDQUFDLEdBQUc7SUFDOUJDLGdCQUFnQk4sdUNBQVEsR0FBR0ssR0FBRyxDQUFDLEdBQUdHLEdBQUcsQ0FBQyxJQUFJQyxPQUFPLENBQUM7QUFDcEQ7QUFFTyxlQUFlQyxLQUFLQyxHQUFnQjtJQUN6QyxNQUFNQyxZQUFZQyxLQUFLQyxHQUFHO0lBQzFCLElBQUk7UUFDRixNQUFNQyxPQUFPLE1BQU1KLElBQUlLLElBQUk7UUFDM0IsTUFBTSxFQUFFYixVQUFVLEVBQUVHLGNBQWMsRUFBRSxHQUFHTCxjQUFjZ0IsS0FBSyxDQUFDRjtRQUUzREcsUUFBUUMsR0FBRyxDQUFDO1FBQ1pELFFBQVFDLEdBQUcsQ0FBQztRQUNaRCxRQUFRQyxHQUFHLENBQUM7UUFDWkQsUUFBUUMsR0FBRyxDQUFDLENBQUMsa0JBQWtCLEVBQUVoQixXQUFXaUIsU0FBUyxDQUFDLEdBQUcsSUFBSSxFQUFFakIsV0FBV2tCLE1BQU0sR0FBRyxLQUFLLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFDckdILFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHFCQUFxQixFQUFFYixlQUFlLENBQUM7UUFDcERZLFFBQVFDLEdBQUcsQ0FBQztRQUNaRCxRQUFRQyxHQUFHLENBQUM7UUFFWixNQUFNRyxVQUFVLE1BQU12Qiw4RUFBNEJBLENBQUNJLFlBQVlHO1FBRS9ELE1BQU1pQixVQUFVLENBQUMsQ0FBQ1YsS0FBS0MsR0FBRyxLQUFLRixTQUFRLElBQUssSUFBRyxFQUFHWSxPQUFPLENBQUM7UUFDMUROLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDJCQUEyQixFQUFFSSxRQUFRLENBQUMsQ0FBQztRQUNwREwsUUFBUUMsR0FBRyxDQUFDLENBQUMsbUJBQW1CLEVBQUVHLFFBQVFHLEtBQUssQ0FBQ0osTUFBTSxDQUFDLENBQUM7UUFDeERILFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDBCQUEwQixFQUFFRyxRQUFRSSxtQkFBbUIsRUFBRUMsS0FBSyxTQUFTLE9BQU8sQ0FBQztRQUM1RlQsUUFBUUMsR0FBRyxDQUFDLENBQUMsaUJBQWlCLEVBQUVHLFFBQVFNLFNBQVMsRUFBRUQsS0FBSyxTQUFTLE9BQU8sQ0FBQztRQUN6RVQsUUFBUUMsR0FBRyxDQUFDO1FBRVosT0FBT3JCLHFEQUFZQSxDQUFDa0IsSUFBSSxDQUFDO1lBQ3ZCYSxTQUFTO1lBQ1QxQjtZQUNBbUI7UUFDRjtJQUNGLEVBQUUsT0FBT1EsT0FBTztRQUNkLE1BQU1QLFVBQVUsQ0FBQyxDQUFDVixLQUFLQyxHQUFHLEtBQUtGLFNBQVEsSUFBSyxJQUFHLEVBQUdZLE9BQU8sQ0FBQztRQUMxRE4sUUFBUVksS0FBSyxDQUFDLENBQUMsK0JBQStCLEVBQUVQLFFBQVEsQ0FBQyxDQUFDO1FBQzFETCxRQUFRWSxLQUFLLENBQUMsWUFBWUEsaUJBQWlCQyxRQUFRRCxNQUFNRSxPQUFPLEdBQUdGO1FBQ25FLE9BQU9oQyxxREFBWUEsQ0FBQ2tCLElBQUksQ0FDdEI7WUFBRWMsT0FBT0EsaUJBQWlCQyxRQUFRRCxNQUFNRSxPQUFPLEdBQUc7UUFBb0IsR0FDdEU7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYW50cnlpcS8uL2FwcC9hcGkvcHJvY2Vzcy12b2ljZS9yb3V0ZS50cz8zNzVhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBleHRyYWN0UHJvZmlsZUZyb21UcmFuc2NyaXB0IH0gZnJvbSAnQC9saWIvaHVnZ2luZ2ZhY2UnO1xuaW1wb3J0IHsgeiB9IGZyb20gJ3pvZCc7XG5cbmNvbnN0IFJlcXVlc3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHRyYW5zY3JpcHQ6IHouc3RyaW5nKCkubWluKDEsICdUcmFuc2NyaXB0IGlzIHJlcXVpcmVkJyksXG4gIGhvdXNlaG9sZF9zaXplOiB6Lm51bWJlcigpLm1pbigxKS5tYXgoMjApLmRlZmF1bHQoMSksXG59KTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxOiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXEuanNvbigpO1xuICAgIGNvbnN0IHsgdHJhbnNjcmlwdCwgaG91c2Vob2xkX3NpemUgfSA9IFJlcXVlc3RTY2hlbWEucGFyc2UoYm9keSk7XG5cbiAgICBjb25zb2xlLmxvZygnXFxu8J+OpCDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZAnKTtcbiAgICBjb25zb2xlLmxvZygnICAgUFJPQ0VTUyBWT0lDRSDigJQgQW5hbHl6aW5nIHRyYW5zY3JpcHQnKTtcbiAgICBjb25zb2xlLmxvZygn4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQJyk7XG4gICAgY29uc29sZS5sb2coYCAg8J+TnSBUcmFuc2NyaXB0OiBcIiR7dHJhbnNjcmlwdC5zdWJzdHJpbmcoMCwgODApfSR7dHJhbnNjcmlwdC5sZW5ndGggPiA4MCA/ICcuLi4nIDogJyd9XCJgKTtcbiAgICBjb25zb2xlLmxvZyhgICDwn5GkIEhvdXNlaG9sZCBzaXplOiAke2hvdXNlaG9sZF9zaXplfWApO1xuICAgIGNvbnNvbGUubG9nKCcgIPCfpJYgU2VuZGluZyB0byBIdWdnaW5nIEZhY2UgQUkgZm9yIGFuYWx5c2lzLi4uJyk7XG4gICAgY29uc29sZS5sb2coJyAg4o+zIFRoaXMgbWF5IHRha2UgMTAtMjAgc2Vjb25kcy4uLlxcbicpO1xuXG4gICAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IGV4dHJhY3RQcm9maWxlRnJvbVRyYW5zY3JpcHQodHJhbnNjcmlwdCwgaG91c2Vob2xkX3NpemUpO1xuXG4gICAgY29uc3QgZWxhcHNlZCA9ICgoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSkgLyAxMDAwKS50b0ZpeGVkKDEpO1xuICAgIGNvbnNvbGUubG9nKGBcXG4gIOKchSBQcm9maWxlIGV4dHJhY3RlZCBpbiAke2VsYXBzZWR9c2ApO1xuICAgIGNvbnNvbGUubG9nKGAgIPCfjb0gIE1lYWxzIGZvdW5kOiAke3Byb2ZpbGUubWVhbHMubGVuZ3RofWApO1xuICAgIGNvbnNvbGUubG9nKGAgIPCfpZcgRGlldGFyeSBwcmVmZXJlbmNlczogJHtwcm9maWxlLmRpZXRhcnlfcHJlZmVyZW5jZXM/LmpvaW4oJywgJykgfHwgJ25vbmUnfWApO1xuICAgIGNvbnNvbGUubG9nKGAgIOKaoO+4jyAgQWxsZXJnaWVzOiAke3Byb2ZpbGUuYWxsZXJnaWVzPy5qb2luKCcsICcpIHx8ICdub25lJ31gKTtcbiAgICBjb25zb2xlLmxvZygn4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXFxuJyk7XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHRyYW5zY3JpcHQsXG4gICAgICBwcm9maWxlLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnN0IGVsYXBzZWQgPSAoKERhdGUubm93KCkgLSBzdGFydFRpbWUpIC8gMTAwMCkudG9GaXhlZCgxKTtcbiAgICBjb25zb2xlLmVycm9yKGBcXG7inYwgUFJPQ0VTUyBWT0lDRSBGQUlMRUQgYWZ0ZXIgJHtlbGFwc2VkfXNgKTtcbiAgICBjb25zb2xlLmVycm9yKCcgIEVycm9yOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Byb2Nlc3NpbmcgZmFpbGVkJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZXh0cmFjdFByb2ZpbGVGcm9tVHJhbnNjcmlwdCIsInoiLCJSZXF1ZXN0U2NoZW1hIiwib2JqZWN0IiwidHJhbnNjcmlwdCIsInN0cmluZyIsIm1pbiIsImhvdXNlaG9sZF9zaXplIiwibnVtYmVyIiwibWF4IiwiZGVmYXVsdCIsIlBPU1QiLCJyZXEiLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwiYm9keSIsImpzb24iLCJwYXJzZSIsImNvbnNvbGUiLCJsb2ciLCJzdWJzdHJpbmciLCJsZW5ndGgiLCJwcm9maWxlIiwiZWxhcHNlZCIsInRvRml4ZWQiLCJtZWFscyIsImRpZXRhcnlfcHJlZmVyZW5jZXMiLCJqb2luIiwiYWxsZXJnaWVzIiwic3VjY2VzcyIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwic3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/process-voice/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/huggingface.ts":
/*!****************************!*\
  !*** ./lib/huggingface.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractProfileFromTranscript: () => (/* binding */ extractProfileFromTranscript),\n/* harmony export */   optimizeShoppingBasket: () => (/* binding */ optimizeShoppingBasket)\n/* harmony export */ });\nconst HF_TOKEN = process.env.HF_TOKEN;\nconst API_URL = \"https://router.huggingface.co/v1/chat/completions\";\nconst MODEL = \"Qwen/Qwen2.5-72B-Instruct\";\n/**\n * Calls Hugging Face Inference API directly via fetch.\n * Includes 60s timeout and 1 retry on failure.\n */ async function chatCompletion(systemPrompt, userMessage, maxTokens = 2048) {\n    const MAX_RETRIES = 2;\n    const TIMEOUT_MS = 60000; // 60 seconds\n    const requestBody = JSON.stringify({\n        model: MODEL,\n        messages: [\n            {\n                role: \"system\",\n                content: systemPrompt\n            },\n            {\n                role: \"user\",\n                content: userMessage\n            }\n        ],\n        max_tokens: maxTokens,\n        temperature: 0.3\n    });\n    console.log(`  [HF] Request size: ${(requestBody.length / 1024).toFixed(1)}KB, max_tokens: ${maxTokens}`);\n    for(let attempt = 1; attempt <= MAX_RETRIES; attempt++){\n        const controller = new AbortController();\n        const timeoutId = setTimeout(()=>controller.abort(), TIMEOUT_MS);\n        try {\n            console.log(`  [HF] Attempt ${attempt}/${MAX_RETRIES} ‚Äî calling ${MODEL}...`);\n            const startTime = Date.now();\n            const response = await fetch(API_URL, {\n                method: \"POST\",\n                headers: {\n                    \"Authorization\": `Bearer ${HF_TOKEN}`,\n                    \"Content-Type\": \"application/json\"\n                },\n                body: requestBody,\n                signal: controller.signal\n            });\n            clearTimeout(timeoutId);\n            const elapsed = ((Date.now() - startTime) / 1000).toFixed(1);\n            if (!response.ok) {\n                const errorBody = await response.text();\n                console.error(`  [HF] ‚ùå API error (${response.status}) after ${elapsed}s: ${errorBody.substring(0, 200)}`);\n                if (attempt < MAX_RETRIES) {\n                    console.log(`  [HF] Retrying in 2s...`);\n                    await new Promise((r)=>setTimeout(r, 2000));\n                    continue;\n                }\n                throw new Error(`Hugging Face API error (${response.status}): ${errorBody}`);\n            }\n            const data = await response.json();\n            const text = data.choices?.[0]?.message?.content ?? \"\";\n            console.log(`  [HF] ‚úÖ Response received in ${elapsed}s (${text.length} chars)`);\n            return text;\n        } catch (err) {\n            clearTimeout(timeoutId);\n            if (err.name === \"AbortError\") {\n                console.error(`  [HF] ‚è∞ Request timed out after ${TIMEOUT_MS / 1000}s`);\n            } else {\n                console.error(`  [HF] ‚ùå Fetch error: ${err.message}`);\n            }\n            if (attempt < MAX_RETRIES) {\n                console.log(`  [HF] Retrying in 2s...`);\n                await new Promise((r)=>setTimeout(r, 2000));\n                continue;\n            }\n            throw err;\n        }\n    }\n    throw new Error(\"All retry attempts exhausted\");\n}\n/**\n * Extracts structured meal and ingredient data from a voice transcript.\n * Returns a fully typed UserProfile with meals, ingredients, and preferences.\n */ async function extractProfileFromTranscript(transcript, household_size = 1) {\n    const systemPrompt = `You are a dietary analysis expert. Extract structured meal and ingredient data from a user's spoken description of their cooking habits. \n    \n    Return ONLY valid JSON with this exact structure:\n    {\n      \"meals\": [\n        {\n          \"name\": \"meal name\",\n          \"ingredients\": [\n            { \"name\": \"ingredient\", \"quantity\": \"500g\", \"category\": \"protein|vegetable|grain|dairy|condiment|other\", \"essential\": true }\n          ],\n          \"frequency\": \"daily|weekly|monthly\"\n        }\n      ],\n      \"dietary_preferences\": [\"string\"],\n      \"allergies\": [\"string\"],\n      \"household_size\": number,\n      \"shopping_frequency\": \"weekly|biweekly|monthly\"\n    }\n    \n    Be practical and thorough. Infer South African context (pap, braai, etc.). If quantity not specified, infer reasonable amounts for the household size.`;\n    const userMessage = `Household size: ${household_size} people.\\n\\nTranscript: \"${transcript}\"\\n\\nExtract the meal profile as JSON.`;\n    const text = await chatCompletion(systemPrompt, userMessage);\n    try {\n        const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n        if (!jsonMatch) throw new Error(\"No JSON found in response\");\n        const profile = JSON.parse(jsonMatch[0]);\n        profile.household_size = household_size;\n        return profile;\n    } catch  {\n        throw new Error(`Failed to parse model response: ${text}`);\n    }\n}\n/**\n * Takes scraped products and a user profile, returns an optimized shopping basket\n * that stays within budget and matches user preferences.\n */ async function optimizeShoppingBasket(profile, products, budget) {\n    const productCatalog = products.map((p)=>({\n            id: p.id,\n            name: p.name,\n            brand: p.brand,\n            price: p.price,\n            weight: p.weight,\n            unit_price: p.unit_price,\n            store: p.store,\n            category: p.category\n        }));\n    const allIngredients = profile.meals.flatMap((m)=>m.ingredients);\n    const uniqueIngredients = Array.from(new Map(allIngredients.map((i)=>[\n            i.name.toLowerCase(),\n            i\n        ])).values());\n    const systemPrompt = `You are a smart shopping optimization engine for South African consumers. \n    \n    Given a list of needed ingredients and available products from Pick n Pay, Shoprite, and Checkers, build the most cost-effective shopping basket.\n    \n    Rules:\n    1. Prioritize best value (lowest unit price) while respecting brand preferences\n    2. Do NOT exceed the budget\n    3. For each ingredient, pick 1 recommended product and 1-2 alternatives\n    4. Calculate exact savings vs choosing the most expensive option\n    5. Generate practical shopping tips for the user\n    \n    Return ONLY valid JSON:\n    {\n      \"items\": [\n        {\n          \"ingredient\": \"string\",\n          \"recommended_product_id\": \"string\",\n          \"alternative_product_ids\": [\"string\"],\n          \"quantity_needed\": \"string\",\n          \"savings_vs_expensive\": number\n        }\n      ],\n      \"total_cost\": number,\n      \"tips\": [\"tip1\", \"tip2\", \"tip3\"]\n    }`;\n    const userMessage = JSON.stringify({\n        budget_zar: budget,\n        needed_ingredients: uniqueIngredients,\n        available_products: productCatalog,\n        household_size: profile.household_size,\n        shopping_frequency: profile.shopping_frequency\n    });\n    const text = await chatCompletion(systemPrompt, userMessage, 4096);\n    try {\n        const jsonMatch = text.match(/\\{[\\s\\S]*\\}/);\n        if (!jsonMatch) throw new Error(\"No JSON found\");\n        const raw = JSON.parse(jsonMatch[0]);\n        const productMap = new Map(products.map((p)=>[\n                p.id,\n                p\n            ]));\n        const items = raw.items.filter((item)=>productMap.has(item.recommended_product_id)).map((item)=>({\n                ingredient: item.ingredient,\n                recommended_product: productMap.get(item.recommended_product_id),\n                alternatives: (item.alternative_product_ids || []).filter((id)=>productMap.has(id)).map((id)=>productMap.get(id)),\n                quantity_needed: item.quantity_needed,\n                savings_vs_expensive: item.savings_vs_expensive || 0\n            }));\n        const total_cost = items.reduce((sum, i)=>sum + i.recommended_product.price, 0);\n        const store_breakdown = items.reduce((acc, item)=>{\n            const store = item.recommended_product.store;\n            acc[store] = (acc[store] || 0) + item.recommended_product.price;\n            return acc;\n        }, {});\n        return {\n            items,\n            total_cost,\n            budget,\n            savings_total: items.reduce((sum, i)=>sum + i.savings_vs_expensive, 0),\n            budget_remaining: budget - total_cost,\n            store_breakdown,\n            generated_at: new Date(),\n            tips: raw.tips || []\n        };\n    } catch  {\n        throw new Error(`Failed to parse basket response: ${text}`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUcsQ0FBQ0wsS0FBS0Usc0JBQXNCO2dCQUMvREksY0FBYyxDQUFDTixLQUFLTyx1QkFBdUIsSUFBSSxFQUFFLEVBQzVDUixNQUFNLENBQUMsQ0FBQzFCLEtBQWV3QixXQUFXSSxHQUFHLENBQUM1QixLQUN0Q0YsR0FBRyxDQUFDLENBQUNFLEtBQWV3QixXQUFXUSxHQUFHLENBQUNoQztnQkFDeENtQyxpQkFBaUJSLEtBQUtRLGVBQWU7Z0JBQ3JDQyxzQkFBc0JULEtBQUtTLG9CQUFvQixJQUFJO1lBQ3ZEO1FBRUosTUFBTUMsYUFBYVosTUFBTWEsTUFBTSxDQUFDLENBQUNDLEtBQUt2QixJQUFNdUIsTUFBTXZCLEVBQUVlLG1CQUFtQixDQUFDN0IsS0FBSyxFQUFFO1FBRS9FLE1BQU1zQyxrQkFBa0JmLE1BQU1hLE1BQU0sQ0FDaEMsQ0FBQ0csS0FBS2Q7WUFDRixNQUFNdEIsUUFBUXNCLEtBQUtJLG1CQUFtQixDQUFDMUIsS0FBSztZQUM1Q29DLEdBQUcsQ0FBQ3BDLE1BQU0sR0FBRyxDQUFDb0MsR0FBRyxDQUFDcEMsTUFBTSxJQUFJLEtBQUtzQixLQUFLSSxtQkFBbUIsQ0FBQzdCLEtBQUs7WUFDL0QsT0FBT3VDO1FBQ1gsR0FDQSxDQUFDO1FBR0wsT0FBTztZQUNIaEI7WUFDQVk7WUFDQXpDO1lBQ0E4QyxlQUFlakIsTUFBTWEsTUFBTSxDQUFDLENBQUNDLEtBQUt2QixJQUFNdUIsTUFBTXZCLEVBQUVvQixvQkFBb0IsRUFBRTtZQUN0RU8sa0JBQWtCL0MsU0FBU3lDO1lBQzNCRztZQUNBSSxjQUFjLElBQUlsRjtZQUNsQm1GLE1BQU10QixJQUFJc0IsSUFBSSxJQUFJLEVBQUU7UUFDeEI7SUFDSixFQUFFLE9BQU07UUFDSixNQUFNLElBQUlqRSxNQUFNLENBQUMsaUNBQWlDLEVBQUVOLEtBQUssQ0FBQztJQUM5RDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGFudHJ5aXEvLi9saWIvaHVnZ2luZ2ZhY2UudHM/YTBmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VyUHJvZmlsZSwgQmFza2V0SXRlbSwgUHJvZHVjdCwgU2hvcHBpbmdCYXNrZXQgfSBmcm9tICdAL3R5cGVzJztcblxuY29uc3QgSEZfVE9LRU4gPSBwcm9jZXNzLmVudi5IRl9UT0tFTjtcbmNvbnN0IEFQSV9VUkwgPSAnaHR0cHM6Ly9yb3V0ZXIuaHVnZ2luZ2ZhY2UuY28vdjEvY2hhdC9jb21wbGV0aW9ucyc7XG5jb25zdCBNT0RFTCA9ICdRd2VuL1F3ZW4yLjUtNzJCLUluc3RydWN0JztcblxuLyoqXG4gKiBDYWxscyBIdWdnaW5nIEZhY2UgSW5mZXJlbmNlIEFQSSBkaXJlY3RseSB2aWEgZmV0Y2guXG4gKiBJbmNsdWRlcyA2MHMgdGltZW91dCBhbmQgMSByZXRyeSBvbiBmYWlsdXJlLlxuICovXG5hc3luYyBmdW5jdGlvbiBjaGF0Q29tcGxldGlvbihcbiAgICBzeXN0ZW1Qcm9tcHQ6IHN0cmluZyxcbiAgICB1c2VyTWVzc2FnZTogc3RyaW5nLFxuICAgIG1heFRva2VuczogbnVtYmVyID0gMjA0OFxuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCBNQVhfUkVUUklFUyA9IDI7XG4gICAgY29uc3QgVElNRU9VVF9NUyA9IDYwMDAwOyAvLyA2MCBzZWNvbmRzXG5cbiAgICBjb25zdCByZXF1ZXN0Qm9keSA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbW9kZWw6IE1PREVMLFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogc3lzdGVtUHJvbXB0IH0sXG4gICAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogdXNlck1lc3NhZ2UgfSxcbiAgICAgICAgXSxcbiAgICAgICAgbWF4X3Rva2VuczogbWF4VG9rZW5zLFxuICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxuICAgIH0pO1xuXG4gICAgY29uc29sZS5sb2coYCAgW0hGXSBSZXF1ZXN0IHNpemU6ICR7KHJlcXVlc3RCb2R5Lmxlbmd0aCAvIDEwMjQpLnRvRml4ZWQoMSl9S0IsIG1heF90b2tlbnM6ICR7bWF4VG9rZW5zfWApO1xuXG4gICAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IGF0dGVtcHQgPD0gTUFYX1JFVFJJRVM7IGF0dGVtcHQrKykge1xuICAgICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgICAgICBjb25zdCB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSwgVElNRU9VVF9NUyk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFtIRl0gQXR0ZW1wdCAke2F0dGVtcHR9LyR7TUFYX1JFVFJJRVN9IOKAlCBjYWxsaW5nICR7TU9ERUx9Li4uYCk7XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKEFQSV9VUkwsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke0hGX1RPS0VOfWAsXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBib2R5OiByZXF1ZXN0Qm9keSxcbiAgICAgICAgICAgICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgICAgY29uc3QgZWxhcHNlZCA9ICgoRGF0ZS5ub3coKSAtIHN0YXJ0VGltZSkgLyAxMDAwKS50b0ZpeGVkKDEpO1xuXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZXJyb3JCb2R5ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCAgW0hGXSDinYwgQVBJIGVycm9yICgke3Jlc3BvbnNlLnN0YXR1c30pIGFmdGVyICR7ZWxhcHNlZH1zOiAke2Vycm9yQm9keS5zdWJzdHJpbmcoMCwgMjAwKX1gKTtcbiAgICAgICAgICAgICAgICBpZiAoYXR0ZW1wdCA8IE1BWF9SRVRSSUVTKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFtIRl0gUmV0cnlpbmcgaW4gMnMuLi5gKTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UociA9PiBzZXRUaW1lb3V0KHIsIDIwMDApKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSHVnZ2luZyBGYWNlIEFQSSBlcnJvciAoJHtyZXNwb25zZS5zdGF0dXN9KTogJHtlcnJvckJvZHl9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gZGF0YS5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2U/LmNvbnRlbnQgPz8gJyc7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgICBbSEZdIOKchSBSZXNwb25zZSByZWNlaXZlZCBpbiAke2VsYXBzZWR9cyAoJHt0ZXh0Lmxlbmd0aH0gY2hhcnMpYCk7XG4gICAgICAgICAgICByZXR1cm4gdGV4dDtcbiAgICAgICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICAgICAgaWYgKGVyci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGAgIFtIRl0g4o+wIFJlcXVlc3QgdGltZWQgb3V0IGFmdGVyICR7VElNRU9VVF9NUyAvIDEwMDB9c2ApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGAgIFtIRl0g4p2MIEZldGNoIGVycm9yOiAke2Vyci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGF0dGVtcHQgPCBNQVhfUkVUUklFUykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFtIRl0gUmV0cnlpbmcgaW4gMnMuLi5gKTtcbiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyID0+IHNldFRpbWVvdXQociwgMjAwMCkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKCdBbGwgcmV0cnkgYXR0ZW1wdHMgZXhoYXVzdGVkJyk7XG59XG5cbi8qKlxuICogRXh0cmFjdHMgc3RydWN0dXJlZCBtZWFsIGFuZCBpbmdyZWRpZW50IGRhdGEgZnJvbSBhIHZvaWNlIHRyYW5zY3JpcHQuXG4gKiBSZXR1cm5zIGEgZnVsbHkgdHlwZWQgVXNlclByb2ZpbGUgd2l0aCBtZWFscywgaW5ncmVkaWVudHMsIGFuZCBwcmVmZXJlbmNlcy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4dHJhY3RQcm9maWxlRnJvbVRyYW5zY3JpcHQoXG4gICAgdHJhbnNjcmlwdDogc3RyaW5nLFxuICAgIGhvdXNlaG9sZF9zaXplOiBudW1iZXIgPSAxXG4pOiBQcm9taXNlPFVzZXJQcm9maWxlPiB7XG4gICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gYFlvdSBhcmUgYSBkaWV0YXJ5IGFuYWx5c2lzIGV4cGVydC4gRXh0cmFjdCBzdHJ1Y3R1cmVkIG1lYWwgYW5kIGluZ3JlZGllbnQgZGF0YSBmcm9tIGEgdXNlcidzIHNwb2tlbiBkZXNjcmlwdGlvbiBvZiB0aGVpciBjb29raW5nIGhhYml0cy4gXG4gICAgXG4gICAgUmV0dXJuIE9OTFkgdmFsaWQgSlNPTiB3aXRoIHRoaXMgZXhhY3Qgc3RydWN0dXJlOlxuICAgIHtcbiAgICAgIFwibWVhbHNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJuYW1lXCI6IFwibWVhbCBuYW1lXCIsXG4gICAgICAgICAgXCJpbmdyZWRpZW50c1wiOiBbXG4gICAgICAgICAgICB7IFwibmFtZVwiOiBcImluZ3JlZGllbnRcIiwgXCJxdWFudGl0eVwiOiBcIjUwMGdcIiwgXCJjYXRlZ29yeVwiOiBcInByb3RlaW58dmVnZXRhYmxlfGdyYWlufGRhaXJ5fGNvbmRpbWVudHxvdGhlclwiLCBcImVzc2VudGlhbFwiOiB0cnVlIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIFwiZnJlcXVlbmN5XCI6IFwiZGFpbHl8d2Vla2x5fG1vbnRobHlcIlxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgXCJkaWV0YXJ5X3ByZWZlcmVuY2VzXCI6IFtcInN0cmluZ1wiXSxcbiAgICAgIFwiYWxsZXJnaWVzXCI6IFtcInN0cmluZ1wiXSxcbiAgICAgIFwiaG91c2Vob2xkX3NpemVcIjogbnVtYmVyLFxuICAgICAgXCJzaG9wcGluZ19mcmVxdWVuY3lcIjogXCJ3ZWVrbHl8Yml3ZWVrbHl8bW9udGhseVwiXG4gICAgfVxuICAgIFxuICAgIEJlIHByYWN0aWNhbCBhbmQgdGhvcm91Z2guIEluZmVyIFNvdXRoIEFmcmljYW4gY29udGV4dCAocGFwLCBicmFhaSwgZXRjLikuIElmIHF1YW50aXR5IG5vdCBzcGVjaWZpZWQsIGluZmVyIHJlYXNvbmFibGUgYW1vdW50cyBmb3IgdGhlIGhvdXNlaG9sZCBzaXplLmA7XG5cbiAgICBjb25zdCB1c2VyTWVzc2FnZSA9IGBIb3VzZWhvbGQgc2l6ZTogJHtob3VzZWhvbGRfc2l6ZX0gcGVvcGxlLlxcblxcblRyYW5zY3JpcHQ6IFwiJHt0cmFuc2NyaXB0fVwiXFxuXFxuRXh0cmFjdCB0aGUgbWVhbCBwcm9maWxlIGFzIEpTT04uYDtcblxuICAgIGNvbnN0IHRleHQgPSBhd2FpdCBjaGF0Q29tcGxldGlvbihzeXN0ZW1Qcm9tcHQsIHVzZXJNZXNzYWdlKTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGpzb25NYXRjaCA9IHRleHQubWF0Y2goL1xce1tcXHNcXFNdKlxcfS8pO1xuICAgICAgICBpZiAoIWpzb25NYXRjaCkgdGhyb3cgbmV3IEVycm9yKCdObyBKU09OIGZvdW5kIGluIHJlc3BvbnNlJyk7XG4gICAgICAgIGNvbnN0IHByb2ZpbGUgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSkgYXMgVXNlclByb2ZpbGU7XG4gICAgICAgIHByb2ZpbGUuaG91c2Vob2xkX3NpemUgPSBob3VzZWhvbGRfc2l6ZTtcbiAgICAgICAgcmV0dXJuIHByb2ZpbGU7XG4gICAgfSBjYXRjaCB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHBhcnNlIG1vZGVsIHJlc3BvbnNlOiAke3RleHR9YCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRha2VzIHNjcmFwZWQgcHJvZHVjdHMgYW5kIGEgdXNlciBwcm9maWxlLCByZXR1cm5zIGFuIG9wdGltaXplZCBzaG9wcGluZyBiYXNrZXRcbiAqIHRoYXQgc3RheXMgd2l0aGluIGJ1ZGdldCBhbmQgbWF0Y2hlcyB1c2VyIHByZWZlcmVuY2VzLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gb3B0aW1pemVTaG9wcGluZ0Jhc2tldChcbiAgICBwcm9maWxlOiBVc2VyUHJvZmlsZSxcbiAgICBwcm9kdWN0czogUHJvZHVjdFtdLFxuICAgIGJ1ZGdldDogbnVtYmVyXG4pOiBQcm9taXNlPFNob3BwaW5nQmFza2V0PiB7XG4gICAgY29uc3QgcHJvZHVjdENhdGFsb2cgPSBwcm9kdWN0cy5tYXAoKHApID0+ICh7XG4gICAgICAgIGlkOiBwLmlkLFxuICAgICAgICBuYW1lOiBwLm5hbWUsXG4gICAgICAgIGJyYW5kOiBwLmJyYW5kLFxuICAgICAgICBwcmljZTogcC5wcmljZSxcbiAgICAgICAgd2VpZ2h0OiBwLndlaWdodCxcbiAgICAgICAgdW5pdF9wcmljZTogcC51bml0X3ByaWNlLFxuICAgICAgICBzdG9yZTogcC5zdG9yZSxcbiAgICAgICAgY2F0ZWdvcnk6IHAuY2F0ZWdvcnksXG4gICAgfSkpO1xuXG4gICAgY29uc3QgYWxsSW5ncmVkaWVudHMgPSBwcm9maWxlLm1lYWxzLmZsYXRNYXAoKG0pID0+IG0uaW5ncmVkaWVudHMpO1xuICAgIGNvbnN0IHVuaXF1ZUluZ3JlZGllbnRzID0gQXJyYXkuZnJvbShcbiAgICAgICAgbmV3IE1hcChhbGxJbmdyZWRpZW50cy5tYXAoKGkpID0+IFtpLm5hbWUudG9Mb3dlckNhc2UoKSwgaV0pKS52YWx1ZXMoKVxuICAgICk7XG5cbiAgICBjb25zdCBzeXN0ZW1Qcm9tcHQgPSBgWW91IGFyZSBhIHNtYXJ0IHNob3BwaW5nIG9wdGltaXphdGlvbiBlbmdpbmUgZm9yIFNvdXRoIEFmcmljYW4gY29uc3VtZXJzLiBcbiAgICBcbiAgICBHaXZlbiBhIGxpc3Qgb2YgbmVlZGVkIGluZ3JlZGllbnRzIGFuZCBhdmFpbGFibGUgcHJvZHVjdHMgZnJvbSBQaWNrIG4gUGF5LCBTaG9wcml0ZSwgYW5kIENoZWNrZXJzLCBidWlsZCB0aGUgbW9zdCBjb3N0LWVmZmVjdGl2ZSBzaG9wcGluZyBiYXNrZXQuXG4gICAgXG4gICAgUnVsZXM6XG4gICAgMS4gUHJpb3JpdGl6ZSBiZXN0IHZhbHVlIChsb3dlc3QgdW5pdCBwcmljZSkgd2hpbGUgcmVzcGVjdGluZyBicmFuZCBwcmVmZXJlbmNlc1xuICAgIDIuIERvIE5PVCBleGNlZWQgdGhlIGJ1ZGdldFxuICAgIDMuIEZvciBlYWNoIGluZ3JlZGllbnQsIHBpY2sgMSByZWNvbW1lbmRlZCBwcm9kdWN0IGFuZCAxLTIgYWx0ZXJuYXRpdmVzXG4gICAgNC4gQ2FsY3VsYXRlIGV4YWN0IHNhdmluZ3MgdnMgY2hvb3NpbmcgdGhlIG1vc3QgZXhwZW5zaXZlIG9wdGlvblxuICAgIDUuIEdlbmVyYXRlIHByYWN0aWNhbCBzaG9wcGluZyB0aXBzIGZvciB0aGUgdXNlclxuICAgIFxuICAgIFJldHVybiBPTkxZIHZhbGlkIEpTT046XG4gICAge1xuICAgICAgXCJpdGVtc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcImluZ3JlZGllbnRcIjogXCJzdHJpbmdcIixcbiAgICAgICAgICBcInJlY29tbWVuZGVkX3Byb2R1Y3RfaWRcIjogXCJzdHJpbmdcIixcbiAgICAgICAgICBcImFsdGVybmF0aXZlX3Byb2R1Y3RfaWRzXCI6IFtcInN0cmluZ1wiXSxcbiAgICAgICAgICBcInF1YW50aXR5X25lZWRlZFwiOiBcInN0cmluZ1wiLFxuICAgICAgICAgIFwic2F2aW5nc192c19leHBlbnNpdmVcIjogbnVtYmVyXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBcInRvdGFsX2Nvc3RcIjogbnVtYmVyLFxuICAgICAgXCJ0aXBzXCI6IFtcInRpcDFcIiwgXCJ0aXAyXCIsIFwidGlwM1wiXVxuICAgIH1gO1xuXG4gICAgY29uc3QgdXNlck1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGJ1ZGdldF96YXI6IGJ1ZGdldCxcbiAgICAgICAgbmVlZGVkX2luZ3JlZGllbnRzOiB1bmlxdWVJbmdyZWRpZW50cyxcbiAgICAgICAgYXZhaWxhYmxlX3Byb2R1Y3RzOiBwcm9kdWN0Q2F0YWxvZyxcbiAgICAgICAgaG91c2Vob2xkX3NpemU6IHByb2ZpbGUuaG91c2Vob2xkX3NpemUsXG4gICAgICAgIHNob3BwaW5nX2ZyZXF1ZW5jeTogcHJvZmlsZS5zaG9wcGluZ19mcmVxdWVuY3ksXG4gICAgfSk7XG5cbiAgICBjb25zdCB0ZXh0ID0gYXdhaXQgY2hhdENvbXBsZXRpb24oc3lzdGVtUHJvbXB0LCB1c2VyTWVzc2FnZSwgNDA5Nik7XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBqc29uTWF0Y2ggPSB0ZXh0Lm1hdGNoKC9cXHtbXFxzXFxTXSpcXH0vKTtcbiAgICAgICAgaWYgKCFqc29uTWF0Y2gpIHRocm93IG5ldyBFcnJvcignTm8gSlNPTiBmb3VuZCcpO1xuICAgICAgICBjb25zdCByYXcgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XG5cbiAgICAgICAgY29uc3QgcHJvZHVjdE1hcCA9IG5ldyBNYXAocHJvZHVjdHMubWFwKChwKSA9PiBbcC5pZCwgcF0pKTtcblxuICAgICAgICBjb25zdCBpdGVtczogQmFza2V0SXRlbVtdID0gcmF3Lml0ZW1zXG4gICAgICAgICAgICAuZmlsdGVyKChpdGVtOiBhbnkpID0+IHByb2R1Y3RNYXAuaGFzKGl0ZW0ucmVjb21tZW5kZWRfcHJvZHVjdF9pZCkpXG4gICAgICAgICAgICAubWFwKChpdGVtOiBhbnkpID0+ICh7XG4gICAgICAgICAgICAgICAgaW5ncmVkaWVudDogaXRlbS5pbmdyZWRpZW50LFxuICAgICAgICAgICAgICAgIHJlY29tbWVuZGVkX3Byb2R1Y3Q6IHByb2R1Y3RNYXAuZ2V0KGl0ZW0ucmVjb21tZW5kZWRfcHJvZHVjdF9pZCkhLFxuICAgICAgICAgICAgICAgIGFsdGVybmF0aXZlczogKGl0ZW0uYWx0ZXJuYXRpdmVfcHJvZHVjdF9pZHMgfHwgW10pXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGlkOiBzdHJpbmcpID0+IHByb2R1Y3RNYXAuaGFzKGlkKSlcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoaWQ6IHN0cmluZykgPT4gcHJvZHVjdE1hcC5nZXQoaWQpISksXG4gICAgICAgICAgICAgICAgcXVhbnRpdHlfbmVlZGVkOiBpdGVtLnF1YW50aXR5X25lZWRlZCxcbiAgICAgICAgICAgICAgICBzYXZpbmdzX3ZzX2V4cGVuc2l2ZTogaXRlbS5zYXZpbmdzX3ZzX2V4cGVuc2l2ZSB8fCAwLFxuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIGNvbnN0IHRvdGFsX2Nvc3QgPSBpdGVtcy5yZWR1Y2UoKHN1bSwgaSkgPT4gc3VtICsgaS5yZWNvbW1lbmRlZF9wcm9kdWN0LnByaWNlLCAwKTtcblxuICAgICAgICBjb25zdCBzdG9yZV9icmVha2Rvd24gPSBpdGVtcy5yZWR1Y2UoXG4gICAgICAgICAgICAoYWNjLCBpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcmUgPSBpdGVtLnJlY29tbWVuZGVkX3Byb2R1Y3Quc3RvcmU7XG4gICAgICAgICAgICAgICAgYWNjW3N0b3JlXSA9IChhY2Nbc3RvcmVdIHx8IDApICsgaXRlbS5yZWNvbW1lbmRlZF9wcm9kdWN0LnByaWNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPlxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpdGVtcyxcbiAgICAgICAgICAgIHRvdGFsX2Nvc3QsXG4gICAgICAgICAgICBidWRnZXQsXG4gICAgICAgICAgICBzYXZpbmdzX3RvdGFsOiBpdGVtcy5yZWR1Y2UoKHN1bSwgaSkgPT4gc3VtICsgaS5zYXZpbmdzX3ZzX2V4cGVuc2l2ZSwgMCksXG4gICAgICAgICAgICBidWRnZXRfcmVtYWluaW5nOiBidWRnZXQgLSB0b3RhbF9jb3N0LFxuICAgICAgICAgICAgc3RvcmVfYnJlYWtkb3duLFxuICAgICAgICAgICAgZ2VuZXJhdGVkX2F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgdGlwczogcmF3LnRpcHMgfHwgW10sXG4gICAgICAgIH07XG4gICAgfSBjYXRjaCB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIHBhcnNlIGJhc2tldCByZXNwb25zZTogJHt0ZXh0fWApO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJIRl9UT0tFTiIsInByb2Nlc3MiLCJlbnYiLCJBUElfVVJMIiwiTU9ERUwiLCJjaGF0Q29tcGxldGlvbiIsInN5c3RlbVByb21wdCIsInVzZXJNZXNzYWdlIiwibWF4VG9rZW5zIiwiTUFYX1JFVFJJRVMiLCJUSU1FT1VUX01TIiwicmVxdWVzdEJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwibWF4X3Rva2VucyIsInRlbXBlcmF0dXJlIiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsInRvRml4ZWQiLCJhdHRlbXB0IiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJhYm9ydCIsInN0YXJ0VGltZSIsIkRhdGUiLCJub3ciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJzaWduYWwiLCJjbGVhclRpbWVvdXQiLCJlbGFwc2VkIiwib2siLCJlcnJvckJvZHkiLCJ0ZXh0IiwiZXJyb3IiLCJzdGF0dXMiLCJzdWJzdHJpbmciLCJQcm9taXNlIiwiciIsIkVycm9yIiwiZGF0YSIsImpzb24iLCJjaG9pY2VzIiwibWVzc2FnZSIsImVyciIsIm5hbWUiLCJleHRyYWN0UHJvZmlsZUZyb21UcmFuc2NyaXB0IiwidHJhbnNjcmlwdCIsImhvdXNlaG9sZF9zaXplIiwianNvbk1hdGNoIiwibWF0Y2giLCJwcm9maWxlIiwicGFyc2UiLCJvcHRpbWl6ZVNob3BwaW5nQmFza2V0IiwicHJvZHVjdHMiLCJidWRnZXQiLCJwcm9kdWN0Q2F0YWxvZyIsIm1hcCIsInAiLCJpZCIsImJyYW5kIiwicHJpY2UiLCJ3ZWlnaHQiLCJ1bml0X3ByaWNlIiwic3RvcmUiLCJjYXRlZ29yeSIsImFsbEluZ3JlZGllbnRzIiwibWVhbHMiLCJmbGF0TWFwIiwibSIsImluZ3JlZGllbnRzIiwidW5pcXVlSW5ncmVkaWVudHMiLCJBcnJheSIsImZyb20iLCJNYXAiLCJpIiwidG9Mb3dlckNhc2UiLCJ2YWx1ZXMiLCJidWRnZXRfemFyIiwibmVlZGVkX2luZ3JlZGllbnRzIiwiYXZhaWxhYmxlX3Byb2R1Y3RzIiwic2hvcHBpbmdfZnJlcXVlbmN5IiwicmF3IiwicHJvZHVjdE1hcCIsIml0ZW1zIiwiZmlsdGVyIiwiaXRlbSIsImhhcyIsInJlY29tbWVuZGVkX3Byb2R1Y3RfaWQiLCJpbmdyZWRpZW50IiwicmVjb21tZW5kZWRfcHJvZHVjdCIsImdldCIsImFsdGVybmF0aXZlcyIsImFsdGVybmF0aXZlX3Byb2R1Y3RfaWRzIiwicXVhbnRpdHlfbmVlZGVkIiwic2F2aW5nc192c19leHBlbnNpdmUiLCJ0b3RhbF9jb3N0IiwicmVkdWNlIiwic3VtIiwic3RvcmVfYnJlYWtkb3duIiwiYWNjIiwic2F2aW5nc190b3RhbCIsImJ1ZGdldF9yZW1haW5pbmciLCJnZW5lcmF0ZWRfYXQiLCJ0aXBzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/huggingface.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess-voice%2Froute&page=%2Fapi%2Fprocess-voice%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess-voice%2Froute.ts&appDir=%2Fhome%2Fchosen333%2FMusic%2Fpantryip%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Fchosen333%2FMusic%2Fpantryip&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();